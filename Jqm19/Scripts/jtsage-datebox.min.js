!function(e){e.widget("jtsage.datebox",{initSelector:"input[data-role='datebox']",options:{version:"4.4.1",jqmVersion:"1.4.5",bootstrapVersion:"3.3.7",bootstrap4Version:"4.0.0",jqmuiWidgetVersion:"1.11.4",theme:!1,themeDefault:"a",themeHeader:"a",themeSetButton:"a",themeCloseButton:"a",extraInputClass:"",mode:!1,transition:"fade",useAnimation:!0,hideInput:!1,hideContainer:!1,lockInput:!0,zindex:"1100",clickEvent:"vclick",clickEventAlt:"click",useKinetic:!0,defaultValue:!1,showInitialValue:!1,linkedField:!1,linkedFieldFormat:"%J",popupPosition:!1,popupButtonPosition:"left",popupForceX:!1,popupForceY:!1,useModal:!0,useModalTheme:"b",useInline:!1,useInlineBlind:!1,useHeader:!0,useImmediate:!1,useButton:!0,buttonIcon:!1,useFocus:!1,useSetButton:!0,useCancelButton:!1,useTodayButton:!1,closeTodayButton:!1,useTomorrowButton:!1,closeTomorrowButton:!1,useClearButton:!1,useCollapsedBut:!1,usePlaceholder:!1,beforeOpenCallback:!1,beforeOpenCallbackArgs:[],openCallback:!1,openCallbackArgs:[],closeCallback:!1,closeCallbackArgs:[],runOnBlurCallback:!1,startOffsetYears:!1,startOffsetMonths:!1,startOffsetDays:!1,afterToday:!1,beforeToday:!1,notToday:!1,maxDays:!1,minDays:!1,maxYear:!1,minYear:!1,blackDates:!1,blackDatesRec:!1,blackDays:!1,whiteDates:!0,minHour:!1,maxHour:!1,minTime:!1,maxTime:!1,maxDur:!1,minDur:!1,minuteStep:1,minuteStepRound:0,twoDigitYearCutoff:38,rolloverMode:{m:!0,d:!0,h:!0,i:!0,s:!0},useLang:"default",lang:{default:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",todayButtonLabel:"Jump to Today",tomorrowButtonLabel:"Jump to Tomorrow",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],datetimeFieldOrder:["y","m","d","h","i","s","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",datetimeFormat:"%Y-%m-%dT%k:%M:%S",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear",cancelButton:"Cancel",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}},themeDateToday:"b",themeDayHigh:"b",themeDatePick:"b",themeDateHigh:"b",themeDateHighAlt:"b",themeDateHighRec:"b",themeDate:"a",themeButton:"a",themeInput:"",themeClearButton:"a",themeCancelButton:"a",themeTomorrowButton:"a",themeTodayButton:"a",buttonIconDate:"calendar",buttonIconTime:"clock",disabledState:"ui-state-disabled",calNextMonthIcon:"plus",calPrevMonthIcon:"minus",btnCls:" ui-corner-all ui-btn ui-btn-",icnCls:" ui-btn-icon-notext ui-icon-",s:{cal:{prevMonth:"{text}",nextMonth:"{text}",botButton:"<a href='#' class='{cls} {icon}' role='button'>{text}</a>"}},calHighToday:!0,calHighPick:!0,calShowDays:!0,calOnlyMonth:!1,calWeekMode:!1,calWeekModeDay:1,calControlGroup:!1,calShowWeek:!1,calUsePickers:!1,calNoHeader:!1,calFormatter:!1,calAlwaysValidateDates:!1,calYearPickMin:-6,calYearPickMax:6,calYearPickRelative:!0,calBeforeAppendFunc:function(e){return e},highDays:!1,highDates:!1,highDatesRec:!1,highDatesAlt:!1,enableDates:!1,calDateList:!1,calShowDateList:!1,validHours:!1,repButton:!0,durationStep:1,durationSteppers:{d:1,h:1,i:1,s:1}},_getLongOptions:function(e){var t,a,n={};for(t in e.data())"datebox"===t.substr(0,7)&&t.length>7&&(a=t.substr(7),"options"!==(a=a.charAt(0).toLowerCase()+a.slice(1))&&(n[a]=e.data(t)));return n},_setOption:function(){e.Widget.prototype._setOption.apply(this,arguments),this.refresh()},getOption:function(e){var t=this.__(e);return"Err:NotFound"!==t?t:this.options[e]},_enhanceDate:function(){e.extend(this._date.prototype,{copy:function(t,a){return t=e.extend([0,0,0,0,0,0,0],t),a=e.extend([0,0,0,0,0,0,0],a),new Date(a[0]>0?a[0]:this.get(0)+t[0],a[1]>0?a[1]:this.get(1)+t[1],a[2]>0?a[2]:this.get(2)+t[2],a[3]>0?a[3]:this.get(3)+t[3],a[4]>0?a[4]:this.get(4)+t[4],a[5]>0?a[5]:this.get(5)+t[5],a[6]>0?a[5]:this.get(6)+t[6])},adj:function(e,t){if("number"!=typeof t||"number"!=typeof e)throw new Error("Invalid Arguments");switch(e){case 0:this.setD(0,this.get(0)+t);break;case 1:this.setD(1,this.get(1)+t);break;case 2:this.setD(2,this.get(2)+t);break;case 3:t*=60;case 4:t*=60;case 5:t*=1e3;case 6:this.setTime(this.getTime()+t)}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t)}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds();case 6:return this.getMilliseconds()}return!1},get12hr:function(){return 0===this.get(3)?12:this.get(3)<13?this.get(3):this.get(3)-12},iso:function(){var e=[0,0,0],t=0;for(t=0;t<3;t++)e[t]=this.get(t),1===t&&e[t]++,e[t]<10&&(e[t]="0"+String(e[t]));return e.join("-")},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return Math.floor(this.getTime()/1e3)},getArray:function(){var e=[0,0,0,0,0,0],t=0;for(t=0;t<6;t++)e[t]=this.get(t);return e},setFirstDay:function(e){return this.setD(2,1).adj(2,e-this.getDay()),this.get(2)>10&&this.adj(2,7),this},setDWeek:function(e,t){return 4===e?this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,7*(t-1)):this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,7*(t-1))},getDWeek:function(e){var t,a;switch(e){case 0:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(0),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 1:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(1),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 4:return 11===this.getMonth()&&this.getDate()>28?1:(t=this.copy([0,-1*this.getMonth()],!0).setFirstDay(4).adj(2,-3),a=Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1,a<1?(t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3),Math.floor((this.getTime()-t.getTime())/6048e5)+1):a);default:return 0}}})},_ord:{default:function(e){var t=e%10;return e>9&&e<21||t>3?"th":["th","st","nd","rd"][t]}},_customformat:{default:function(){return!1}},_formatter:function(e,t,a){var n,i=this,o=this.options,s=0;return void 0===a&&(a=!0),"dura"===o.mode.substr(0,4)&&(s=i._dur(this.theDate.getTime()-this.initDate.getTime()),e.match(/%Dd/)||(s[1]+=24*s[0]),e.match(/%Dl/)||(s[2]+=60*s[1]),e.match(/%DM/)||(s[3]+=60*s[2])),e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,a,r){if("X"===a)return void 0!==i._customformat[o.mode]?i._customformat[o.mode](r,t,o):e;if("D"===a)switch(r){case"d":return s[0];case"l":return i._zPad(s[1]);case"M":return i._zPad(s[2]);case"S":return i._zPad(s[3]);case"A":return i.__("durationDays")[1===s[0]?0:1];default:return e}switch(r){case"a":return i.__("daysOfWeekShort")[t.getDay()];case"A":return i.__("daysOfWeek")[t.getDay()];case"b":return i.__("monthsOfYearShort")[t.getMonth()];case"B":return i.__("monthsOfYear")[t.getMonth()];case"C":return parseInt(t.getFullYear()/100);case"d":return i._zPad(t.getDate(),a);case"H":case"k":return i._zPad(t.getHours(),a);case"I":case"l":return i._zPad(t.get12hr(),a);case"m":return i._zPad(t.getMonth()+1,a);case"M":return i._zPad(t.getMinutes(),a);case"p":case"P":return n=i.__("meridiem")[t.get(3)<12?0:1].toUpperCase(),"P"===r?n.toLowerCase():n;case"s":return t.getEpoch();case"S":return i._zPad(t.getSeconds(),a);case"u":return i._zPad(t.getDay()+1,a);case"w":return t.getDay();case"y":return i._zPad(t.getFullYear()%100);case"Y":return t.getFullYear();case"E":return t.getFullYear()+543;case"V":return i._zPad(t.getDWeek(4),a);case"U":return i._zPad(t.getDWeek(0),a);case"W":return i._zPad(t.getDWeek(1),a);case"o":return void 0!==i._ord[o.useLang]?i._ord[o.useLang](t.getDate()):i._ord.default(t.getDate());case"j":return n=new Date(t.getFullYear(),0,1),n="000"+String(Math.ceil((t-n)/864e5)+1),n.slice(-3);case"J":return t.toJSON();case"G":return n=t.getFullYear(),1===t.getDWeek(4)&&t.getMonth()>0?n+1:t.getDWeek(4)>51&&t.getMonth()<11?n-1:n;case"g":return n=t.getFullYear%100,1===t.getDWeek(4)&&t.getMonth()>0&&++n,t.getDWeek(4)>51&&t.getMonth()<11&&--n,i._zpad(n);default:return e}}),!0===i.__("useArabicIndic")&&!0===a&&(e=i._dRep(e)),e},_minStepFix:function(){var e=this.theDate.get(4),t=this.options.minuteStep,a=this.options.minStepRound,n=e%t;t>1&&n>0&&(a<0?e-=n:a>0?e+=t-n:e%t<t/2?e-=n:e+=t-n,this.theDate.setMinutes(e))},_check:function(){var t,a,n,i,o,s,r=this,d=this.options,c=this.theDate;if(r.dateOK=!0,void 0===d.mode)return!0;if(d.afterToday&&(t=new r._date,c<t&&(c=t)),d.beforeToday&&(t=new r._date,c>t&&(c=t)),!1!==d.maxDays&&(t=new r._date,t.adj(2,d.maxDays),c>t&&(c=t)),!1!==d.minDays&&(t=new r._date,t.adj(2,-1*d.minDays),c<t&&(c=t)),!1!==d.minHour&&c.get(3)<d.minHour&&c.setD(3,d.minHour),!1!==d.maxHour&&c.get(3)>d.maxHour&&c.setD(3,d.maxHour),!1!==d.minTime&&(t=new r._date,s=d.minTime.split(":"),t.setD(3,s[0]).setD(4,s[1]),c<t&&(c=t)),!1!==d.maxTime&&(t=new r._date,s=d.maxTime.split(":"),t.setD(3,s[0]).setD(4,s[1]),c>t&&(c=t)),!1!==d.maxYear&&(t=new r._date(d.maxYear,11,31),c>t&&(c=t)),!1!==d.minYear&&(t=new r._date(d.minYear,0,1),c<t&&(c=t)),"time"===d.mode.substr(0,4)||"dur"===d.mode.substr(0,3))"timeflipbox"===d.mode&&!1!==d.validHours&&e.inArray(c.get(3),d.validHours)<0&&(r.dateOK=!1);else{if(!1!==d.blackDatesRec)for(a=c.get(0),n=c.get(1),i=c.get(2),o=0;o<d.blackDatesRec.length;o++)-1!==d.blackDatesRec[o][0]&&d.blackDatesRec[o][0]!==a||-1!==d.blackDatesRec[o][1]&&d.blackDatesRec[o][1]!==n||-1!==d.blackDatesRec[o][2]&&d.blackDatesRec[o][2]!==i||(r.dateOK=!1);!1!==d.blackDates&&e.inArray(c.iso(),d.blackDates)>-1&&(r.dateOK=!1),!1!==d.blackDays&&e.inArray(c.getDay(),d.blackDays)>-1&&(r.dateOK=!1),!1!==d.whiteDates&&e.inArray(r.theDate.iso(),d.whiteDates)>-1&&(r.dateOK=!0,c=r.theDate)}r.theDate=c},_fixstepper:function(t){var a=this.options.durationSteppers,n=this.options.durationStep;e.inArray("d",t)>-1&&(a.d=n),e.inArray("h",t)>-1&&(a.d=1,a.h=n),e.inArray("i",t)>-1&&(a.h=1,a.i=n),e.inArray("s",t)>-1&&(a.i=1,a.s=n)},_parser:{default:function(){return!1}},_makeDate:function(t,a){var n,i,o,s,r=this,d=this.options,c=this.options.defaultValue,l=r.__fmt(),u=null,h=[],p=!1,m=new r._date,f={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:!1,wtyp:4,wday:!1,yday:!1,meri:0};if(void 0===a&&(a=!1),t=e.trim(!0===r.__("useArabicIndic")&&void 0!==t?r._dRep(t,-1):t),void 0===d.mode)return m;if(void 0!==r._parser[d.mode])return r._parser[d.mode].apply(r,[t]);if("durationbox"===d.mode||"durationflipbox"===d.mode){if(l=l.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|[0-9]+)";default:return".+?"}}),l=new RegExp("^"+l+"$"),u=l.exec(t),o=l.exec(r.__fmt()),null===u||u.length!==o.length)return"number"==typeof c&&c>0?new r._date(1e3*(r.initDate.getEpoch()+parseInt(c,10))):new r._date(r.initDate.getTime());for(i=r.initDate.getEpoch(),n=1;n<u.length;n++)s=parseInt(u[n],10),o[n].match(/^%Dd$/i)&&(i+=86400*s),o[n].match(/^%Dl$/i)&&(i+=3600*s),o[n].match(/^%DM$/i)&&(i+=60*s),o[n].match(/^%DS$/i)&&(i+=s);return new r._date(1e3*i)}if("%J"===l)return m=new r._date(t),isNaN(m.getDate())&&(m=new r._date),m;if(l=l.replace(/%(0|-)*([a-z])/gi,function(e,t,a){switch(h.push(a),a){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|[0-9]{"+("-"===t?"1,":"")+"2})";case"j":return"("+e+"|[0-9]{3})";case"s":return"("+e+"|[0-9]+)";case"g":case"y":return"("+e+"|[0-9]{2})";case"E":case"G":case"Y":return"("+e+"|[0-9]{1,4})";default:return h.pop(),".+?"}}),l=new RegExp("^"+l+"$"),u=l.exec(t),o=l.exec(r.__fmt()),null===u||u.length!==o.length){if(""!==t&&(p=!0),!1!==c&&""!==c)switch(typeof c){case"object":e.isFunction(c.getDay)?m=c:3===c.length&&(m=r._pa(c,"time"===d.mode.substr(0,4)&&m));break;case"number":m=new r._date(1e3*c);break;case"string":"time"===d.mode.substr(0,4)?(i=e.extend([0,0,0],c.split(":")).slice(0,3),m=r._pa(i,m)):(i=e.extend([0,0,0],c.split("-")).slice(0,3),i[1]--,m=r._pa(i,!1))}isNaN(m.getDate())&&(m=new r._date)}else{for(n=1;n<u.length;n++)switch(s=parseInt(u[n],10),h[n-1]){case"s":return new r._date(1e3*parseInt(u[n],10));case"Y":case"G":f.year=s;break;case"E":f.year=s-543;break;case"y":case"g":d.afterToday||s<d.twoDigitYearCutoff?f.year=2e3+s:f.year=1900+s;break;case"m":f.mont=s-1;break;case"d":f.date=s;break;case"H":case"k":case"I":case"l":f.hour=s;break;case"M":f.mins=s;break;case"S":f.secs=s;break;case"u":f.wday=s-1;break;case"w":f.wday=s;break;case"j":f.yday=s;break;case"V":f.week=s,f.wtyp=4;break;case"U":f.week=s,f.wtyp=0;break;case"W":f.week=s,f.wtyp=1;break;case"p":case"P":s=new RegExp("^"+u[n]+"$","i"),f.meri=s.test(r.__("meridiem")[0])?-1:1;break;case"b":i=e.inArray(u[n],r.__("monthsOfYearShort")),i>-1&&(f.mont=i);break;case"B":i=e.inArray(u[n],r.__("monthsOfYear")),i>-1&&(f.mont=i)}if(0!==f.meri&&(-1===f.meri&&12===f.hour&&(f.hour=0),1===f.meri&&12!==f.hour&&(f.hour=f.hour+12)),m=new r._date(r._n(f.year,0),r._n(f.mont,0),r._n(f.date,1),r._n(f.hour,0),r._n(f.mins,0),r._n(f.secs,0),0),f.year<100&&-1!==f.year&&m.setFullYear(f.year),f.mont>-1&&f.date>-1||f.hour>-1&&f.mins>-1&&f.secs>-1)return!0===a?[m,p]:m;!1!==f.week&&(m.setDWeek(f.wtyp,f.week),f.date>-1&&m.setDate(f.date)),!1!==f.yday&&m.setD(1,0).setD(2,1).adj(2,f.yday-1),!1!==f.wday&&m.adj(2,f.wday-m.getDay())}return!0===a?[m,p]:m},_event:function(t,a){var n,i=e(this).data("jtsage-datebox"),o=e(this).data("jtsage-datebox").options;if(!t.isPropagationStopped())switch(a.method){case"close":void 0===a.closeCancel&&(a.closeCancel=!1),i.cancelClose=a.closeCancel,i.close();break;case"open":i.open();break;case"set":"object"==typeof a.value?(i.theDate=a.value,i._t({method:"doset"})):(e(this).val(a.value),!1!==o.linkedField&&e(o.linkedField).val(i.callFormat(o.linkedFieldFormat,i.theDate,!1)),e(this).trigger("change"));break;case"doset":n="_"+i.options.mode+"DoSet",e.isFunction(i[n])?i[n].apply(i,[]):i._t({method:"set",value:i._formatter(i.__fmt(),i.theDate),date:i.theDate});break;case"dooffset":a.type&&i._offset(a.type,a.amount,!0);break;case"dorefresh":i.refresh();break;case"doclear":e(this).val("").trigger("change");break;case"clear":e(this).trigger("change")}},_build:{default:function(){this.d.headerText="Error",!1!==this.d.intHTML&&this.d.intHTML.remove().empty(),this.d.intHTML=e("<div class='ui-body-b'><h2 style='text-align:center' class='bg-danger'>Unknown Mode</h2></div>")},calbox:function(){var t,a,n,i,o,s,r,d,c,l,u,h,p,m,f=this,b=this.options,D=b.calDateList,_="ui-datebox-",g=!1!==f.calBackDate&&f.theDate.get(0)===f.calBackDate.get(0)&&f.theDate.get(1)===f.calBackDate.get(1)?new f._date(f.calBackDate.getTime()):f.theDate,y=!1,k={},v=f.initDate.copy(),w=f.initDate.copy(),x=(g.copy([0],[0,0,1]).getDay()-f.__("calStartDay")+7)%7,T=g.get(1),M=g.get(0),C=g.getArray(),B=""===f.d.input.val()?f._startOffset(f._makeDate(f.d.input.val())):f._makeDate(f.d.input.val()),O=-1,A=new f._date,I=A.getArray(),L=g.copy([0],[0,0,1]).adj(2,-1*x+(0===f.__("calStartDay")?1:0)).getDWeek(4),H=0,F=!1,P=!1,S=32-f.theDate.copy([0],[0,0,32,13]).getDate(),W=32-f.theDate.copy([0,-1],[0,0,32,13]).getDate(),Y=!!(b.afterToday||b.beforeToday||b.notToday||b.calAlwaysValidateDates||b.maxDays||b.minDays||b.blackDays||b.blackDates);if(!1!==f.calBackDate&&f.theDate.get(0)===f.calBackDate.get(0)&&f.theDate.get(1)===f.calBackDate.get(1)&&(f.theDate=new f._date(f.calBackDate.getTime()),f.calBackDate=!1),"boolean"!=typeof f.d.intHTML&&(f.d.intHTML.remove(),f.d.intHTML=null),f.d.headerText=!1!==f._grabLabel()?f._grabLabel():f.__("titleDateDialogLabel"),f.d.intHTML=e("<span>"),e(f._spf("<div class='{cl1}'><div class='{cl2}'><h4>{content}</h4></div></div>",{cl1:_+"gridheader",cl2:_+"gridlabel",content:f._formatter(f.__("calHeaderFormat"),f.theDate)})).appendTo(f.d.intHTML),f._cal_prev_next(f.d.intHTML.find("."+_+"gridheader")),b.calNoHeader&&(b.calUsePickersIcons?(f.d.intHTML.find("."+_+"gridlabel").hide(),f.d.intHTML.find("."+_+"gridplus").find(".ui-btn-inline").addClass(_+"nomargbtn"),f.d.intHTML.find("."+_+"gridminus").find(".ui-btn-inline").addClass(_+"nomargbtn")):f.d.intHTML.find("."+_+"gridheader").remove()),f.calNext=!0,f.calPrev=!0,Math.floor(A.comp()/100)===Math.floor(g.comp()/100)&&(F=!0),Math.floor(A.comp()/1e4)===Math.floor(g.comp()/1e4)&&(P=!0),B.comp()===g.comp()&&(O=B.get(2)),b.afterToday&&(F||P&&I[1]>=C[1])&&(f.calPrev=!1),b.beforeToday&&(F||P&&I[1]<=C[1])&&(f.calNext=!1),!1!==b.minDays&&(v.adj(2,-1*b.minDays),t=v.getArray(),C[0]===t[0]&&C[1]<=t[1]&&(f.calPrev=!1)),!1!==b.maxDays&&(w.adj(2,b.maxDays),t=w.getArray(),C[0]===t[0]&&C[1]>=t[1]&&(f.calNext=!1)),b.calUsePickers&&f._cal_pickers(T,M,I),a=e("<div class='"+_+"grid'>").appendTo(f.d.intHTML),b.calShowDays)for(f._cal_days=f.__("daysOfWeekShort").concat(f.__("daysOfWeekShort")),i=e("<div>",{class:_+"gridrow"}).appendTo(a),b.calControlGroup&&i.addClass(_+"gridrow-last"),!0===f.__("isRTL")&&i.css("direction","rtl"),b.calShowWeek&&e("<div>").addClass(_+"griddate "+_+"griddate-label").appendTo(i),l=0;l<=6;l++)e("<div>").text(f._cal_days[(l+f.__("calStartDay"))%7]).addClass(_+"griddate "+_+"griddate-label").appendTo(i);for(k={i:v,x:w,t:A,p:O},n=f._cal_gen(x,W,S,!b.calOnlyMonth,g.get(1)),!e.isFunction(b.calFormatter)&&!1!==b.calFormatter&&e.isFunction(window[b.calFormatter])&&(b.calFormatter=window[b.calFormatter]),!e.isFunction(b.calBeforeAppendFunc)&&!1!==b.calBeforeAppendFunc&&e.isFunction(window[b.calBeforeAppendFunc])&&(b.calBeforeAppendFunc=window[b.calBeforeAppendFunc]),p=new Date(f.theDate.get(0),n[0][0][1],n[0][0][0],0,0,0,0),m=new Date(f.theDate.get(0),n[n.length-1][6][1],n[n.length-1][6][0],0,0,0,0),!1===f.calBackDate?f.calDateVisible=!0:b.calOnlyMonth?f.calDateVisible=!1:f.calBackDate.comp()<p.comp()||f.calBackDate.comp()>m.comp()?f.calDateVisible=!1:f.calDateVisible=!0,o=0,r=n.length;o<r;o++){for(c=e("<div>",{class:_+"gridrow"}),f.__("isRTL")&&c.css("direction","rtl"),b.calShowWeek&&(e("<div>",{class:_+"griddate "+_+"griddate-empty"}).text("W"+L).addClass("bootstrap"===f.baseMode?"pull-left":"").css(b.calControlGroup?{float:"left"}:{}).appendTo(c),++L>52&&void 0!==n[o+1]&&(L=new f._date(C[0],C[1],0===f.__("calStartDay")?n[o+1][1][0]:n[o+1][0][0],0,0,0,0).getDWeek(4))),s=0,d=n[o].length;s<d;s++)b.calWeekMode&&(H=n[o][b.calWeekModeDay][0]),"boolean"==typeof n[o][s]?e("<div>",{class:_+"griddate "+_+"griddate-empty"}).appendTo(c):(y=f._cal_check(Y,C[0],n[o][s][1],n[o][s][0],k),n[o][s][0]&&(e.isFunction(b.calFormatter)?(h={Year:n[o][s][1]>11?M+1:n[o][s][1]<0?M-1:M,Month:12===n[o][s][1]?0:-1===n[o][s][1]?11:n[o][s][1],Date:n[o][s][0]},h.Arr=[h.Year,f._zPad(h.Month+1),f._zPad(h.Date)],h.ISO=h.Arr.join("-"),h.Comp=h.Arr.join(""),h.curMonth=g.get(1),h.curYear=M,h.dateVisible=f.calDateVisible,t=b.calFormatter(h),u="object"!=typeof t?{text:t,class:""}:{text:t.text,class:t.class}):u={text:n[o][s][0],class:""},b.calBeforeAppendFunc(e("<div>").html(u.text).addClass(_+"griddate").addClass(""+(T===n[o][s][1]||y.force?y.ok||"jqm"!==f.baseMode?b.btnCls+y.theme:b.btnCls+" "+y.theme:_+"griddate-empty"+("bootstrap"===f.baseMode?b.btnCls+"default":"")+(!0===b.calOnlyMonth?" "+b.disabledState:""))).addClass(u.class).css(T===n[o][s][1]||b.calOnlyMonth?{}:{cursor:"pointer"}).data("date",b.calWeekMode?H:n[o][s][0]).data("enabled",y.ok).data("month",n[o][b.calWeekMode?b.calWeekModeDay:s][1])).appendTo(c)));switch(f.baseMode){case"jqm":b.calControlGroup&&(c.find("."+_+"griddate-empty").addClass("ui-btn"),b.calOnlyMonth&&c.find("."+_+"griddate-empty").addClass("ui-state-disabled"),c.controlgroup({type:"horizontal"}));break;case"bootstrap":c.addClass("btn-group");break;case"jqueryui":c.find("."+_+"griddate").removeClass("ui-corner-all").not("."+_+"griddate-empty").first().addClass("ui-corner-left").end().last().addClass("ui-corner-right")}o===r-1&&c.addClass(_+"gridrow-last"),c.appendTo(a)}b.calShowWeek&&a.find("."+_+"griddate").addClass(_+"griddate-week"),b.calShowDateList&&!1!==D&&f._cal_date_list(a),(b.useTodayButton||b.useTomorrowButton||b.useClearButton||b.useCancelButton)&&(c=e("<div>",{class:_+"controls"}),b.useTodayButton&&c.append(f._stdBtn.today.apply(f)),b.useTomorrowButton&&c.append(f._stdBtn.tomorrow.apply(f)),b.useClearButton&&c.append(f._stdBtn.clear.apply(f)),b.useCancelButton&&c.append(f._stdBtn.cancel.apply(f)),f._controlGroup(c).appendTo(a)),f.d.intHTML.on(b.clickEventAlt,"div."+_+"griddate",function(t){t.preventDefault(),e(this).data("enabled")&&(f.calBackDate=!1,f.theDate.setD(2,1).setD(1,e(this).data("month")).setD(2,e(this).data("date")),f._t({method:"set",value:f._formatter(f.__fmt(),f.theDate),date:f.theDate}),f._t({method:"close"}))}),f.d.intHTML.on("swipeleft",function(){f.calNext&&(!1===f.calBackDate&&(f.calBackDate=new Date(f.theDate.getTime())),f._offset("m",1))}).on("swiperight",function(){f.calPrev&&(!1===f.calBackDate&&(f.calBackDate=new Date(f.theDate.getTime())),f._offset("m",-1))}),f.wheelExists&&f.d.intHTML.on("mousewheel",function(e,t){e.preventDefault(),t>0&&f.calNext&&(!1===f.calBackDate&&(f.calBackDate=new Date(f.theDate.getTime())),f.theDate.setD(2,1),f._offset("m",1)),t<0&&f.calPrev&&(!1===f.calBackDate&&(f.calBackDate=new Date(f.theDate.getTime())),f.theDate.setD(2,1),f._offset("m",-1))})},timebox:function(){this._build.datebox.apply(this,[])},datetimebox:function(){this._build.datebox.apply(this,[])},durationbox:function(){this._build.datebox.apply(this,[])},datebox:function(){var t,a,n,i,o,s,r=this,d=this.drag,c=this.options,l="durationbox"===c.mode,u=0,h=["d","h","i","s"],p="ui-datebox-";switch("boolean"!=typeof r.d.intHTML&&r.d.intHTML.empty().remove(),r.d.headerText=!1!==r._grabLabel()?r._grabLabel():"datebox"===c.mode?r.__("titleDateDialogLabel"):r.__("titleTimeDialogLabel"),r.d.intHTML=e("<span>"),c.mode){case"durationbox":r.fldOrder=r.__("durationOrder");break;case"timebox":r.fldOrder=r.__("timeFieldOrder");break;case"datetimebox":r.fldOrder=r.__("datetimeFieldOrder");break;case"datebox":r.fldOrder=r.__("dateFieldOrder")}for(l?(r.dateOK=!0,r._fixstepper(r.fldOrder)):(r._check(),r._minStepFix(),r._dbox_vhour(void 0!==r._dbox_delta?r._dbox_delta:1)),"datebox"!==c.mode&&"datetimebox"!==c.mode||(n="bootstrap4"===r.baseMode?"h6":"h4",e(r._spf("<div class='{cls}'><"+n+">{text}</"+n+"></div>",{cls:p+"header text-center",text:r._formatter(r.__("headerFormat"),r.theDate)})).appendTo(r.d.intHTML)),i=e("<div>").addClass(p+"datebox-groups"),a=0;a<r.fldOrder.length;a++)o=e("<div>").addClass(p+"datebox-group"),"jqm"===r.baseMode&&o.addClass("ui-block-"+["a","b","c","d","e","f","g"][u]),t=l?c.durationSteppers[r.fldOrder[a]]:"i"===r.fldOrder[a]?c.minuteStep:1,"a"===r.fldOrder[a]&&12!==r.__("timeFormat")||(r._dbox_button(1,r.fldOrder[a],t).appendTo(o),l&&e(r._spf("<div><label>{text}</label></div>",{text:r.__("durationLabel")[e.inArray(r.fldOrder[a],h)]})).addClass(p+"datebox-label ui-body-"+c.themeInput).appendTo(o),e("<div><input class='form-control w-100 "+c.extraInputClass+"' type='text'></div>").addClass(function(){switch(r.baseMode){case"jqm":return"ui-input-text ui-body-"+c.themeInput+" ui-mini";case"bootstrap":case"bootstrap4":return c.themeInput;default:return null}}).appendTo(o).find("input").data({field:r.fldOrder[a],amount:t}).addClass(function(){if("bootstrap4"===r.baseMode&&r.fldOrder.length>4)return"px-0"}),r._dbox_button(-1,r.fldOrder[a],t).appendTo(o),o.appendTo(i),u++);switch(r.baseMode){case"jqm":i.addClass("ui-grid-"+[0,0,"a","b","c","d","e","f","g"][u]),u>4&&i.find("input").each(function(){e(this).css({"padding-left":0,"padding-right":0})});break;case"bootstrap":n=Math.floor(100/u)+"%",i.find("."+p+"datebox-group").each(function(){e(this).css({"padding-left":0,"padding-right":0,display:"inline-block",width:n})}),u>4&&i.find("input").each(function(){e(this).css({"padding-left":0,"padding-right":0})});break;case"bootstrap4":i.addClass("d-flex flex-row"),i.find("."+p+"datebox-group");break;case"jqueryui":i.find("."+p+"datebox-group").each(function(){e(this).css("width",100/u+"%")})}if(i.appendTo(r.d.intHTML),r.d.divIn=i,r._dbox_run_update(!0),c.useSetButton||c.useClearButton||c.useCancelButton||c.useTodayButton||c.useTomorrowButton){if(s=e("<div>",{class:p+"controls"}),c.useSetButton){switch(c.mode){case"timebox":n=r.__("setTimeButtonLabel");break;case"durationbox":n=r.__("setDurationButtonLabel");break;case"datebox":case"datetimebox":n=r.__("setDateButtonLabel")}r.setBut=r._stdBtn.close.apply(r,[n]),r.setBut.appendTo(s)}c.useTodayButton&&s.append(r._stdBtn.today.apply(r)),c.useTomorrowButton&&s.append(r._stdBtn.tomorrow.apply(r)),c.useClearButton&&s.append(r._stdBtn.clear.apply(r)),c.useCancelButton&&s.append(r._stdBtn.cancel.apply(r)),r._controlGroup(s).appendTo(r.d.intHTML)}c.repButton||r.d.intHTML.on(c.clickEvent,"."+p+"datebox-button",function(t){i.find(":focus").blur(),t.preventDefault(),r._dbox_delta=e(this).data("amount")>1?1:-1,r._offset(e(this).data("field"),e(this).data("amount"))}),i.on("change","input",function(){r._dbox_enter(e(this))}),i.on("keypress","input",function(t){13===t.which&&!0===r.dateOK&&(r._dbox_enter(e(this)),r._t({method:"set",value:r._formatter(r.__fmt(),r.theDate),date:r.theDate}),r._t({method:"close"}))}),r.wheelExists&&i.on("mousewheel","input",function(t,a){t.preventDefault(),r._dbox_delta=a<0?-1:1,r._offset(e(this).data("field"),(a<0?-1:1)*e(this).data("amount"))}),c.repButton&&(r.d.intHTML.on(d.eStart,"."+p+"datebox-button",function(t){t.preventDefault(),i.find(":focus").blur(),n=[e(this).data("field"),e(this).data("amount")],d.move=!0,d.cnt=0,r._dbox_delta=e(this).data("amount")>1?1:-1,r._offset(n[0],n[1],!1),r._dbox_run_update(),r.runButton||(d.target=n,r.runButton=setTimeout(function(){r._dbox_run()},500))}),r.d.intHTML.on(d.eEndA,"."+p+"datebox-button",function(e){d.move&&(e.preventDefault(),clearTimeout(r.runButton),r.runButton=!1,d.move=!1)}))}},_drag:{default:function(){return!1}},_offset:function(t,a,n){var i,o=this,s=this.options,r=this.theDate,d=!1,c=!1,l=32-o.theDate.copy([0],[0,0,32,13]).getDate(),u=!1;if(t=(t||"").toLowerCase(),u=e.inArray(t,["y","m","d","h","i","s"]),void 0===n&&(n=!0),"a"===t||void 0!==s.rolloverMode[t]&&!0!==s.rolloverMode[t])switch(t){case"y":d=0;break;case"m":o._btwn(r.get(1)+a,-1,12)?d=1:(i=r.get(1)+a,c=i<0?[1,12+i]:[1,i%12]);break;case"d":o._btwn(r.get(2)+a,0,l+1)?d=2:(i=r.get(2)+a,c=i<1?[2,l+i]:[2,i%l]);break;case"h":o._btwn(r.get(3)+a,-1,24)?d=3:(i=r.get(3)+a,c=i<0?[3,24+i]:[3,i%24]);break;case"i":o._btwn(r.get(4)+a,-1,60)?d=4:(i=r.get(4)+a,c=i<0?[4,59+i]:[4,i%60]);break;case"s":o._btwn(r.get(5)+a,-1,60)?d=5:(i=r.get(5)+a,c=i<0?[5,59+i]:[5,i%60]);break;case"a":o._offset("h",12*(a>0?1:-1),!1)}else d=u;!1!==d?o.theDate.adj(d,a):o.theDate.setD(c[0],c[1]),!0===n&&o.refresh(),s.useImmediate&&o._t({method:"doset"}),!1!==o.calBackDate&&o._t({method:"displayChange",selectedDate:o.calBackDate,shownDate:o.theDate,thisChange:t,thisChangeAmount:a}),o._t({method:"offset",type:t,amount:a,newDate:o.theDate})},_startOffset:function(e){var t=this.options;return!1!==t.startOffsetYears&&e.adj(0,t.startOffsetYears),!1!==t.startOffsetMonths&&e.adj(1,t.startOffsetMonths),!1!==t.startOffsetDays&&e.adj(2,t.startOffsetDays),e},getTheDate:function(){return!1!==this.calBackDate?this.calBackDate:this.theDate},getLastDur:function(){return this.lastDuration},dateVisible:function(){return this.calDateVisible},setTheDate:function(e){this.theDate="object"==typeof e?e:this._makeDate(e),this.calBackDate=!1,this.refresh(),this._t({method:"doset"})},parseDate:function(e,t){var a,n=this;return n.fmtOver=e,a=n._makeDate(t),n.fmtOver=!1,a},callFormat:function(e,t,a){return void 0===a&&(a=!1),this._formatter(e,t,a)},refresh:function(){var e=this,t=this.options;void 0===e._build[t.mode]?e._build.default.apply(e,[]):e._build[t.mode].apply(e,[]),!0===e.__("useArabicIndic")&&e._doIndic(),e.d.mainWrap.append(e.d.intHTML),e._t({method:"postrefresh"})},applyMinMax:function(e,t){var a,n,i,o,s=this,r=this.options,d=new this._date;a=s._pa([0,0,0],d),void 0===e&&(e=!0),void 0===t&&(t=!0),!0!==t&&!1!==r.minDays||void 0===s.d.input.attr("min")||(n=s.d.input.attr("min").split("-"),i=new s._date(n[0],n[1]-1,n[2],0,0,0,0),o=(i.getTime()-a.getTime())/864e5,r.minDays=Math.round(-1*o,10)),!0!==t&&!1!==r.maxDays||void 0===s.d.input.attr("max")||(n=s.d.input.attr("max").split("-"),i=new s._date(n[0],n[1]-1,n[2],0,0,0,0),o=(i.getTime()-a.getTime())/864e5,r.maxDays=Math.round(o,10)),!0===e&&s._t({method:"refresh"})},_dur:function(t){var a=[t/864e5,t/36e5%24,t/6e4%60,t/1e3%60];return e.each(a,function(e,t){a[e]=t<0?0:Math.floor(t)}),a},__:function(e){var t=this.options,a=t.lang[t.useLang],n=t[t.mode+"lang"],i="override"+e.charAt(0).toUpperCase()+e.slice(1);return void 0!==t[i]?t[i]:void 0!==a&&void 0!==a[e]?a[e]:void 0!==n&&void 0!==n[e]?n[e]:void 0!==t.lang.default[e]?t.lang.default[e]:"Err:NotFound"},__fmt:function(){var e=this,t=this.options;if(void 0!==e.fmtOver&&!1!==e.fmtOver)return e.fmtOver;switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");case"datetimebox":case"datetimeflipbox":return e.__("datetimeFormat");default:return e.__("dateFormat")}},_zPad:function(e,t){return void 0!==t&&"-"===t?String(e):(e<10?"0":"")+String(e)},_dRep:function(e,t){var a,n,i=48,o=57,s=1584,r="";for(-1===t&&(i+=s,o+=s,s=-1584),n=0;n<e.length;n++)a=e.charCodeAt(n),r+=a>=i&&a<=o?String.fromCharCode(a+s):String.fromCharCode(a);return r},_doIndic:function(){var t=this;t.d.intHTML.find("*").each(function(){e(this).children().length<1?e(this).text(t._dRep(e(this).text())):e(this).hasClass("ui-datebox-slideday")&&e(this).html(t._dRep(e(this).html()))}),t.d.intHTML.find("input").each(function(){e(this).val(t._dRep(e(this).val()))})},_n:function(e,t){return e<0?t:e},_pa:function(e,t){return"boolean"==typeof t?new this._date(e[0],e[1],e[2],0,0,0,0):new this._date(t.get(0),t.get(1),t.get(2),e[0],e[1],e[2],0)},_btwn:function(e,t,a){return e>t&&e<a},_grabLabel:function(){var t,a,n=this,i=this.options,o=!1;return void 0===i.overrideDialogLabel?(t=n.d.input.attr("placeholder"),a=n.d.input.attr("title"),void 0!==t?t:void 0!==a?a:""!==(o=e(document).find("label[for='"+n.d.input.attr("id")+"']").text())&&o):i.overrideDialogLabel},_t:function(e){this.d.input.trigger("datebox",e)},_spf:function(t,a){return e.isArray(a)||e.isPlainObject(a)?t.replace(/{(.+?)}/g,function(e,t){return a[t]}):t},baseMode:"jqm",_stdBtn:{cancel:function(){var t=this,a=this.options;return e("<a href='#' role='button'>"+t.__("cancelButton")+"</a>").addClass("ui-btn ui-btn-"+a.themeCancelButton+" ui-icon-delete ui-btn-icon-left ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})})},clear:function(){var t=this,a=this.options;return e("<a href='#' role='button'>"+t.__("clearButton")+"</a>").addClass("ui-btn ui-btn-"+a.themeClearButton+" ui-icon-delete ui-btn-icon-left ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t.d.input.val(""),t._t({method:"clear"}),t._t({method:"close",closeCancel:!0})})},close:function(t,a){var n=this,i=this.options;return void 0===a&&(a=!1),
e("<a href='#' role='button'>"+t+"</a>").addClass("ui-btn ui-btn-"+i.themeSetButton+" ui-icon-check ui-btn-icon-left ui-shadow ui-corner-all"+(!0===n.dateOK?"":" ui-state-disabled")).on(i.clickEventAlt,function(e){e.preventDefault(),!0===n.dateOK&&(!1===a?n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate}):n._t(a),n._t({method:"close"}))})},today:function(){var t=this,a=this.options;return e("<a href='#' role='button'>"+t.__("todayButtonLabel")+"</a>").addClass("ui-btn ui-btn-"+a.themeTodayButton+" ui-icon-navigation ui-btn-icon-left ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date),t.calBackDate=!1,t._t({method:"doset"}),!0===a.closeTodayButton&&t._t({method:"close"})})},tomorrow:function(){var t=this,a=this.options;return e("<a href='#' role='button'>"+t.__("tomorrowButtonLabel")+"</a>").addClass("ui-btn ui-btn-"+a.themeTomorrowButton+" ui-icon-navigation ui-btn-icon-left ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date).adj(2,1),t.calBackDate=!1,t._t({method:"doset"}),!0===a.closeTomorrowButton&&t._t({method:"close"})})}},_destroy:function(){var t=this,a=this.options,n=this.d.wrap.find("a");t.d.wrap.removeClass("ui-input-has-clear"),n.off(),n.remove(),a.lockInput&&t.d.input.removeAttr("readonly"),t.d.input.off("datebox").off("focus.datebox").off("blur.datebox").off("change.datebox");try{t.d.mainWrap.popup("destroy")}catch(e){}e(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA)},_create:function(){e(document).trigger("dateboxcreate");var t,a,n=this,i=e.extend(this.options,this._getLongOptions(this.element),this.element.data("options")),o=!1===i.theme?e.mobile.getInheritedTheme(this.element):i.theme,s=i.useAnimation?i.transition:"none",r={input:this.element,wrap:this.element.parent(),mainWrap:e("<div>",{class:"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden "+s+" ui-body-"+o}).css("zIndex",i.zindex),intHTML:!1},d=".datebox"+this.uuid,c=void 0!==window.ontouchstart,l={eStart:"touchstart"+d+" mousedown"+d,eMove:"touchmove"+d+" mousemove"+d,eEnd:"touchend"+d+" mouseup"+d,eEndA:["mouseup","touchend","touchcancel","touchmove"].join(d+" ")+d,move:!1,start:!1,end:!1,pos:!1,target:!1,delta:!1,tmp:!1};e.extend(n,{d:r,drag:l,touch:c}),!1!==i.usePlaceholder&&(!0===i.usePlaceholder&&""!==n._grabLabel()&&n.d.input.attr("placeholder",n._grabLabel()),"string"==typeof i.usePlaceholder&&n.d.input.attr("placeholder",i.usePlaceholder)),i.theme=o,n.cancelClose=!1,n.calBackDate=!1,n.calDateVisible=!0,n.disabled=!1,n.runButton=!1,n._date=window.Date,n._enhanceDate(),n.baseID=n.d.input.attr("id"),n.initDate=new n._date,n.initDate.setMilliseconds(0),n.theDate=i.defaultValue?n._makeDate():""!==n.d.input.val()?n._makeDate(n.d.input.val()):new n._date,""===n.d.input.val()&&n._startOffset(n.theDate),n.initDone=!1,i.showInitialValue&&n.d.input.val(n._formatter(n.__fmt(),n.theDate)),i.useButton&&!1!==i.mode&&(n.d.wrap.addClass("ui-input-has-clear"),!1===i.buttonIcon&&("time"===i.mode.substr(0,4)||"dur"===i.mode.substr(0,3)?i.buttonIcon=i.buttonIconTime:i.buttonIcon=i.buttonIconDate),e("<a href='javascript: return false;' class='ui-input-clear ui-btn ui-icon-"+i.buttonIcon+" ui-btn-icon-notext ui-corner-all'></a>").attr("title",n.__("tooltip")).text(n.__("tooltip")).appendTo(n.d.wrap).on(i.clickEvent,function(e){e.preventDefault(),i.useFocus?n.d.input.focus():n.disabled||n._t({method:"open"})})),i.hideInput&&n.d.wrap.hide(),i.hideContainer&&n.d.wrap.parent().hide(),n.d.input.on("focus.datebox",function(){n.d.input.addClass("ui-focus"),!1===n.disabled&&i.useFocus&&n._t({method:"open"})}).on("blur.datebox",function(){n.d.input.removeClass("ui-focus")}).on("change.datebox",function(){"function"==typeof i.runOnBlurCallback?(t=n._makeDate(n.d.input.val(),!0),a=i.runOnBlurCallback.apply(n,[{oldDate:n.theDate,newDate:t[0],wasGoodDate:!t[1],wasBadDate:t[1]}]),"object"!=typeof a?(n.theDate=n._makeDate(n.d.input.val()),n.refresh()):(!0===a.didSomething&&n.d.input.val(a.newDate),n.theDate=n._makeDate(n.d.input.val()),n.refresh())):(n.theDate=n._makeDate(n.d.input.val()),n.refresh())}).on("datebox",n._event),i.lockInput&&n.d.input.attr("readonly","readonly"),void 0!==e.event.special.mousewheel&&(n.wheelExists=!0),n.d.input.is(":disabled")&&n.disable(),n.applyMinMax(!1,!1),(i.useInline||i.useInlineBlind)&&n.open(),e(document).trigger("dateboxaftercreate")},open:function(){var t=this,a=this.options,n={transition:a.useAnimation?a.transition:"none"},i={history:!1,transition:a.useAnimation?a.transition:"none"};if(a.useFocus&&!0===t.fastReopen)return t.d.input.blur(),!1;if(t.theDate=t._makeDate(t.d.input.val()),t.calBackDate=!1,""===t.d.input.val()&&t._startOffset(t.theDate),t.d.input.blur(),void 0===t._build[a.mode]?t._build.default.apply(t,[]):t._build[a.mode].apply(t,[]),void 0!==t._drag[a.mode]&&t._drag[a.mode].apply(t,[]),t._t({method:"refresh"}),!0===t.__("useArabicIndic")&&t._doIndic(),(a.useInline||a.useInlineBlind)&&!1===t.initDone){if(t.d.mainWrap.append(t.d.intHTML),a.hideContainer?(a.useHeader&&t.d.mainWrap.prepend(e("<div class='ui-header ui-bar-"+a.themeHeader+"'><h1 class='ui-title'>"+t.d.headerText+"</h1></div>")),t.d.wrap.parent().after(t.d.mainWrap)):t.d.wrap.parent().append(t.d.mainWrap),t.d.mainWrap.removeClass("ui-datebox-hidden ui-overlay-shadow"),a.useInline)return t.d.mainWrap.addClass("ui-datebox-inline").css("zIndex","auto"),a.hideInput||a.hideContainer||t.d.mainWrap.addClass("ui-datebox-inline-has-input"),setTimeout(function(e){return function(){e._t({method:"postrefresh"})}}(t),100),!0;t.d.mainWrap.addClass("ui-datebox-inline ui-datebox-inline-has-input").css("zIndex","auto"),t.d.mainWrap.hide(),t.initDone=!1,t._t({method:"postrefresh"})}return a.useInlineBlind?(t.initDone?(t.refresh(),t.d.mainWrap.slideDown(),t._t({method:"postrefresh"})):t.initDone=!0,!0):!t.d.intHTML.is(":visible")&&(t.d.mainWrap.empty(),a.useHeader&&(t.d.mainWrap.append(e("<a href='#'>Close</a>").addClass("ui-btn-"+a.popupButtonPosition+" ui-link ui-btn ui-btn-"+(!1===a.themeCloseButton?a.themeHeader:a.themeCloseButton)+" ui-icon-delete ui-btn-icon-notext ui-shadow ui-corner-all").on(a.clickEventAlt,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})})),t.d.mainWrap.append(e("<div class='ui-header ui-bar-"+a.themeHeader+"'><h1 class='ui-title'>"+t.d.headerText+"</h1></div>"))),t.d.mainWrap.append(t.d.intHTML).css("zIndex",a.zindex),t._t({method:"postrefresh"}),!1!==a.popupPosition?n.positionTo=a.popupPosition:void 0!==t.baseID?n.positionTo="#"+t.baseID:n.positionTo="window",!1!==a.popupForceX&&!1!==a.popupForceY&&(n.x=parseInt(a.popupForceX,10),n.y=parseInt(a.popupForceY,10),n.positionTo="origin"),a.useModal&&(i.overlayTheme=a.useModalTheme,i.dismissible=!1),!1!==a.openCallback?(e.isFunction(a.openCallback)||"function"==typeof window[a.openCallback]&&(a.openCallback=window[a.openCallback]),i.afteropen=function(){t._t({method:"postrefresh"}),!1===a.openCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.openCallbackArgs))&&t._t({method:"close"})}):i.afteropen=function(){t._t({method:"postrefresh"})},!1!==a.closeCallback&&(e.isFunction(a.closeCallback)||"function"==typeof window[a.closeCallback]&&(a.closeCallback=window[a.closeCallback]),i.afterclose=function(){a.closeCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration,cancelClose:t.cancelClose}],a.closeCallbackArgs))}),(!1===a.beforeOpenCallback||(e.isFunction(a.beforeOpenCallback)||"function"==typeof window[a.beforeOpenCallback]&&(a.beforeOpenCallback=window[a.beforeOpenCallback]),!1!==a.beforeOpenCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],a.beforeOpenCallbackArgs))))&&void t.d.mainWrap.removeClass("ui-datebox-hidden").popup(i).popup("open",n))},close:function(){var t=this,a=this.options;return t.calBackDate=!1,a.useInlineBlind?(t.d.mainWrap.slideUp(),!0):!(!a.useInline&&!1!==t.d.intHTML)||(t.d.mainWrap.popup("close"),e(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA),void(a.useFocus&&(t.fastReopen=!0,setTimeout(function(e){return function(){e.fastReopen=!1}}(t),300))))},disable:function(){var e=this;e.d.input.attr("disabled",!0),e.d.wrap.addClass("ui-state-disabled").blur(),e.disabled=!0,e.d.mainWrap.addClass("ui-state-disabled"),e._t({method:"disable"})},enable:function(){var e=this;e.d.input.attr("disabled",!1),e.d.wrap.removeClass("ui-state-disabled"),e.disabled=!1,e.d.mainWrap.removeClass("ui-state-disabled"),e._t({method:"enable"})},_controlGroup:function(e){return this.options.useCollapsedBut?(e.controlgroup({type:"horizontal"}),e.addClass("ui-datebox-collapse")):e.controlgroup(),e},_cal_gen:function(e,t,a,n,i){var o=0,s=0,r=1,d=1,c=[],l=[],u=!1;for(o=0;o<=5;o++)if(!1===u){for(l=[],s=0;s<=6;s++)0===o&&s<e?!0===n?l.push([t+(s-e)+1,i-1]):l.push(" "):o>3&&r>a?(!0===n?(l.push([d,i+1]),d++):l.push(" "),u=!0):(l.push([r,i]),++r>a&&(u=!0));c.push(l)}return c},_cal_check:function(t,a,n,i,o){var s,r=this,d=this.options,c=o.x,l=o.i,u=o.t,h=o.p,p=new this._date(a,n,i,12,0,0,0).getDay(),m=d.blackDatesRec,f=d.highDatesRec,b={ok:!0,iso:a+"-"+r._zPad(n+1)+"-"+r._zPad(i),theme:d.themeDate,force:!1,recok:!0,rectheme:!1};if(12===n&&(b.iso=a+1+"-01-"+r._zPad(i)),-1===n&&(b.iso=a-1+"-12-"+r._zPad(i)),b.comp=parseInt(b.iso.replace(/-/g,""),10),!1!==m)for(s=0;s<m.length;s++)-1!==m[s][0]&&m[s][0]!==a||-1!==m[s][1]&&m[s][1]!==n||-1!==m[s][2]&&m[s][2]!==i||(b.ok=!1);if(e.isArray(d.enableDates)&&e.inArray(b.iso,d.enableDates)<0?b.ok=!1:t&&(!0!==b.recok||d.afterToday&&u.comp()>b.comp||d.beforeToday&&u.comp()<b.comp||d.notToday&&u.comp()===b.comp||!1!==d.maxDays&&c.comp()<b.comp||!1!==d.minDays&&l.comp()>b.comp||e.isArray(d.blackDays)&&e.inArray(p,d.blackDays)>-1||e.isArray(d.blackDates)&&e.inArray(b.iso,d.blackDates)>-1)&&(b.ok=!1),e.isArray(d.whiteDates)&&e.inArray(b.iso,d.whiteDates)>-1&&(b.ok=!0),b.ok){if(!1!==f)for(s=0;s<f.length;s++)-1!==f[s][0]&&f[s][0]!==a||-1!==f[s][1]&&f[s][1]!==n||-1!==f[s][2]&&f[s][2]!==i||(b.rectheme=!0);!d.calHighPick||i!==h||""===r.d.input.val()&&!1===d.defaultValue?d.calHighToday&&b.comp===u.comp()?b.theme=d.themeDateToday:d.calHighPick&&r.calDateVisible&&!1!==r.calBackDate&&r.calBackDate.comp()===b.comp?(b.theme=d.themeDatePick,b.force=!0):e.isArray(d.highDatesAlt)&&e.inArray(b.iso,d.highDatesAlt)>-1?b.theme=d.themeDateHighAlt:e.isArray(d.highDates)&&e.inArray(b.iso,d.highDates)>-1?b.theme=d.themeDateHigh:e.isArray(d.highDays)&&e.inArray(p,d.highDays)>-1?b.theme=d.themeDayHigh:e.isArray(d.highDatesRec)&&!0===b.rectheme&&(b.theme=d.themeDateHighRec):b.theme=d.themeDatePick}else b.theme=d.disabledState;return b},_cal_prev_next:function(t){var a=this,n=this.options,i="ui-datebox-";e(a._spf("<div class='{class}'><a href='#'>{name}</a></div>",{class:i+"gridplus"+(a.__("isRTL")?"-rtl":""),name:a._spf(n.s.cal.nextMonth,{text:a.__("nextMonth"),icon:n.calNextMonthIcon})})).prependTo(t).find("a").addClass(function(){switch(a.baseMode){case"jqm":return n.btnCls+n.themeDate+n.icnCls+n.calNextMonthIcon;case"bootstrap":return n.btnCls+n.themeDate+" pull-"+(a.__("isRTL")?"left":"right");case"bootstrap4":return n.btnCls+n.themeDate+" float-"+(a.__("isRTL")?"left":"right");default:return null}}).on(n.clickEventAlt,function(e){return e.preventDefault(),e.stopPropagation(),a.calNext&&(!1===a.calBackDate&&(a.calBackDate=new Date(a.theDate.getTime())),a.theDate.getDate()>28&&a.theDate.setDate(1),a._offset("m",1)),!1}),e(a._spf("<div class='{class}'><a href='#'>{name}</a></div>",{class:i+"gridminus"+(a.__("isRTL")?"-rtl":""),name:a._spf(n.s.cal.prevMonth,{text:a.__("prevMonth"),icon:n.calPrevMonthIcon})})).prependTo(t).find("a").addClass(function(){switch(a.baseMode){case"jqm":return n.btnCls+n.themeDate+n.icnCls+n.calPrevMonthIcon;case"bootstrap":return n.btnCls+n.themeDate+" pull-"+(a.__("isRTL")?"right":"left");case"bootstrap4":return n.btnCls+n.themeDate+" float-"+(a.__("isRTL")?"right":"left");default:return null}}).on(n.clickEventAlt,function(e){return e.preventDefault(),e.stopPropagation(),a.calPrev&&(!1===a.calBackDate&&(a.calBackDate=new Date(a.theDate.getTime())),a.theDate.getDate()>28&&a.theDate.setDate(1),a._offset("m",-1)),!1})},_cal_pickers:function(t,a,n){var i,o,s,r=this,d=this.options,c="ui-datebox-",l=(new Date).get(0),u=e("<div>").addClass("ui-datebox-cal-pickers");for(d.calNoHeader&&d.calUsePickersIcons&&u.addClass("ui-datebox-pickicon"),u.i=e("<fieldset>").appendTo(u),u.a=e("<select>").appendTo(u.i),u.b=e("<select>").appendTo(u.i),s=0;s<=11;s++)u.a.append(e("<option value='"+s+"'"+(t===s?" selected='selected'":"")+">"+r.__("monthsOfYear")[s]+"</option>"));for(i=d.calYearPickMin<1?(d.calYearPickRelative?a:l)+d.calYearPickMin:d.calYearPickMin<1800?(d.calYearPickRelative?a:l)-d.calYearPickMin:"NOW"===d.calYearPickMin?n[0]:d.calYearPickMin,o=d.calYearPickMax<1800?(d.calYearPickRelative?a:l)+d.calYearPickMax:"NOW"===d.calYearPickMax?n[0]:d.calYearPickMax,s=i;s<=o;s++)u.b.append(e("<option value='"+s+"'"+(a===s?" selected='selected'":"")+">"+s+"</option>"));switch(u.a.on("change",function(){!1===r.calBackDate&&(r.calBackDate=new Date(r.theDate.getTime())),r.theDate.setD(1,e(this).val()),r.theDate.get(1)!==parseInt(e(this).val(),10)&&r.theDate.setD(2,0),!1!==r.calBackDate&&r._t({method:"displayChange",selectedDate:r.calBackDate,shownDate:r.theDate,thisChange:"p",thisChangeAmount:null}),r.refresh()}),u.b.on("change",function(){!1===r.calBackDate&&(r.calBackDate=new Date(r.theDate.getTime())),r.theDate.setD(0,e(this).val()),r.theDate.get(1)!==parseInt(u.a.val(),10)&&r.theDate.setD(2,0),!1!==r.calBackDate&&r._t({method:"displayChange",selectedDate:r.calBackDate,shownDate:r.theDate,thisChange:"p",thisChangeAmount:null}),r.refresh()}),r.baseMode){case"bootstrap":case"jqueryui":u.i.find("select").addClass("form-control input-sm").css({marginTop:"3px",float:"left"}).first().css({width:"60%"}).end().last().css({width:"40%"}),d.calNoHeader&&d.calUsePickersIcons?r.d.intHTML.find("."+c+"gridheader").append(u):u.appendTo(r.d.intHTML);break;case"bootstrap4":u.i.find("select").addClass("form-control form-control-sm input-sm").css({marginTop:"3px",float:"left",height:"auto"}).first().css({width:"60%"}).end().last().css({width:"40%"}),u.i.addClass("w-100"),d.calNoHeader&&d.calUsePickersIcons?r.d.intHTML.find("."+c+"gridheader").append(u):u.appendTo(r.d.intHTML);break;case"jqm":u.i.controlgroup({mini:!0,type:"horizontal"}),u.i.find("select").selectmenu({nativeMenu:!0}),u.i.find(".ui-controlgroup-controls").css({marginRight:"auto",marginLeft:"auto",width:"100%",display:"table"}),u.i.find(".ui-select").first().css({width:"60%"}).end().last().css({width:"40%"}),d.calNoHeader&&d.calUsePickersIcons&&u.i.css({padding:"0 10px 5px 10px"}),u.appendTo(r.d.intHTML)}},_cal_date_list:function(t){var a,n,i=this,o=this.options,s=e("<div>").addClass("ui-datebox-pickcontrol");for(s.a=e("<select name='pickdate'></select>").appendTo(s),s.a.append("<option value='false' selected='selected'>"+i.__("calDateListLabel")+"</option>"),a=0;a<o.calDateList.length;a++)s.a.append(e(i._spf("<option value='{0}'>{1}</option>",o.calDateList[a])));switch(s.a.on("change",function(){n=e(this).val().split("-"),i.theDate=new i._date(n[0],n[1]-1,n[2],0,0,0,0),i._t({method:"doset"})}),i.baseMode){case"jqm":s.find("select").selectmenu({mini:!0,nativeMenu:!0});break;case"bootstrap":case"bootstrap4":s.find("select").addClass("form-control input-sm")}s.appendTo(t)},_dbox_run:function(){var e=this,t=this.drag,a=parseInt(6.09+142.8*Math.pow(Math.E,-.039*t.cnt),10);t.didRun=!0,t.cnt++,e._offset(t.target[0],t.target[1],!1),e._dbox_run_update(),e.runButton=setTimeout(function(){e._dbox_run()},a)},_dbox_run_update:function(t){var a=this,n=this.options,i=a.theDate.getTime()-a.initDate.getTime(),o="durationbox"===n.mode,s=a._dur(i<0?0:i);i<0&&(a.lastDuration=0,o&&a.theDate.setTime(a.initDate.getTime())),o&&(a.lastDuration=i/1e3,!1!==n.minDur&&a.theDate.getEpoch()-a.initDate.getEpoch()<n.minDur&&(a.theDate=new Date(a.initDate.getTime()+1e3*n.minDur),a.lastDuration=n.minDur,s=a._dur(1e3*n.minDur)),!1!==n.maxDur&&a.theDate.getEpoch()-a.initDate.getEpoch()>n.maxDur&&(a.theDate=new Date(a.initDate.getTime()+1e3*n.maxDur),a.lastDuration=n.maxDur,s=a._dur(1e3*n.maxDur))),!0!==t&&!0!==o&&(a._check(),"datebox"===n.mode&&a.d.intHTML.find(".ui-datebox-header").find("h4").text(a._formatter(a.__("headerFormat"),a.theDate)),n.useSetButton&&(!1===a.dateOK?a.setBut.addClass(n.disabledState):a.setBut.removeClass(n.disabledState))),a.d.divIn.find("input").each(function(){switch(e(this).data("field")){case"y":e(this).val(a.theDate.get(0));break;case"m":e(this).val(a.theDate.get(1)+1);break;case"d":e(this).val(o?s[0]:a.theDate.get(2));break;case"h":o?e(this).val(s[1]):12===a.__("timeFormat")?e(this).val(a.theDate.get12hr()):e(this).val(a.theDate.get(3));break;case"i":o?e(this).val(s[2]):e(this).val(a._zPad(a.theDate.get(4)));break;case"M":e(this).val(a.__("monthsOfYearShort")[a.theDate.get(1)]);break;case"a":e(this).val(a.__("meridiem")[a.theDate.get(3)>11?1:0]);break;case"s":o?e(this).val(s[3]):e(this).val(a._zPad(a.theDate.get(5)))}}),!0===a.__("useArabicIndic")&&a._doIndic()},_dbox_vhour:function(t){var a,n=this,i=this.options,o=[25,0],s=[25,0];return!1===i.validHours||(e.inArray(n.theDate.getHours(),i.validHours)>-1||(a=n.theDate.getHours(),e.each(i.validHours,function(){(a<this?1:-1)===t?o[0]>Math.abs(this-a)&&(o=[Math.abs(this-a),parseInt(this,10)]):s[0]>Math.abs(this-a)&&(s=[Math.abs(this-a),parseInt(this,10)])}),void(0!==o[1]?n.theDate.setHours(o[1]):n.theDate.setHours(s[1]))))},_dbox_enter:function(t){var a,n=this,i=0;if("M"===t.data("field")&&(a=e.inArray(t.val(),n.__("monthsOfYearShort")))>-1&&n.theDate.setMonth(a),""!==t.val()&&0===t.val().toString().search(/^[0-9]+$/))switch(t.data("field")){case"y":n.theDate.setD(0,parseInt(t.val(),10));break;case"m":n.theDate.setD(1,parseInt(t.val(),10)-1);break;case"d":n.theDate.setD(2,parseInt(t.val(),10)),i+=86400*parseInt(t.val(),10);break;case"h":n.theDate.setD(3,parseInt(t.val(),10)),i+=3600*parseInt(t.val(),10);break;case"i":n.theDate.setD(4,parseInt(t.val(),10)),i+=60*parseInt(t.val(),10);break;case"s":n.theDate.setD(5,parseInt(t.val(),10)),i+=parseInt(t.val(),10)}"durationbox"===this.options.mode&&n.theDate.setTime(n.initDate.getTime()+1e3*i),setTimeout(function(){n.refresh()},150)},_dbox_button:function(t,a,n){var i=this,o=this.options;return e("<div>").addClass("ui-datebox-datebox-button").addClass(o.btnCls+o.themeButton).addClass(function(){switch(i.baseMode){case"jqm":case"bootstrap":return o.icnCls+(t>0?o.calNextMonthIcon:o.calPrevMonthIcon);default:return null}}).data({field:a,amount:n*t}).append(function(){switch(i.baseMode){case"jqueryui":case"bootstrap4":return e("<span>").addClass(o.icnCls+(t>0?o.calNextMonthIcon:o.calPrevMonthIcon));default:return null}})}})}(jQuery);
//# sourceMappingURL=jtsage-datebox.js.map